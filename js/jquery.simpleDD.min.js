/*!
 *
 * jQuery simpleDD
 *
 * A simple jQuery drop down plugin
 *
 * @author			Tim Bennett
 * @version			1.7.4
 * @license			www.texelate.co.uk/mit-license/
 *
 * Download the latest version at www.texelate.co.uk/lab/project/simple-dd/
 *
 * Copyright (c) 2014 - 2015 Texelate Ltd, www.texelate.co.uk
 *
 */
(function(a){a.fn.simpleDD=function(o){var d={timeout:500,dropdownElement:".simpledd-child",closeElement:".simpledd-close",hoverClass:"simpledd-over",closeMenusOnOutsideClick:true,closeMenusOnLoad:false,noScriptLink:null,event:"mouseenter",onInit:function(){},onOpened:function(){},onClosed:function(){},onDestroyed:function(){}};var o=a.extend(d,o);var b=this;var l="simpledd-no-script-href";var i="simpledd-timeout";var f=this.length;var g=1;var e=(("ontouchstart" in window)||(navigator.msMaxTouchPoints>0));var j=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?true:false);var h=a("body");var n=false;function m(q){var p=a(q);if(p.find(o.dropdownElement).eq(0).is(":visible")===true){p.removeClass(o.hoverClass).find(o.dropdownElement).eq(0).css("display","none");if(p.data(i)!=="null"){clearTimeout(p.data(i));p.data(i,"null")}o.onClosed.call(q)}}function k(){b.each(function(){m(this)})}if(j===true){var c=a("a").css("-webkit-tap-highlight-color");h.css("cursor","pointer").css("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)");a("a").css("-webkit-tap-highlight-color",c)}if(e===true){o.event="click"}if(o.closeMenusOnOutsideClick===true){h.on("click",function(p){k()});b.each(function(){a(this).on("click",function(p){p.stopPropagation();a(this).find(o.dropdownElement).eq(0).each(function(){a(this).on("click",function(q){q.stopPropagation()})})})})}return this.each(function(){var q=this;var p=a(this);if(o.noScriptLink!==null){p.find(o.noScriptLink).each(function(){var r=a(this);r.data(l,r.attr("href")).attr("href","#").on("click",function(s){s.preventDefault()})})}p.find(o.closeElement).each(function(){a(this).on("click",function(r){m(q);r.preventDefault()})});if(o.closeMenusOnLoad===true){k()}p.on(o.event,function(r){if(o.event=="click"&&o.noScriptLink!==null&&p.find(o.dropdownElement).eq(0).is(":visible")===true){m(q)}else{k();if(p.data(i)!=="null"){clearTimeout(p.data(i));p.data(i,"null")}p.addClass(o.hoverClass).find(o.dropdownElement).eq(0).css("display","block");o.onOpened.call(this)}});if(e===false&&o.event!="click"){p.on("mouseleave",function(){if(p.find(o.dropdownElement).eq(0).is(":visible")===true){p.data(i,setTimeout(function(){m(q)},o.timeout))}})}g++;if(g===f){o.onInit.call(this);h.trigger("click")}a.fn.destroy=function(){if(n===false){k();b.each(function(){var r=a(this);if(r.data(i)!=="null"){clearTimeout(r.data(i));r.data(i,"null")}if(o.noScriptLink!==null){r.find(o.noScriptLink).each(function(){var s=a(this);s.attr("href",s.data(l)).removeData(l)})}r.off(o.event);h.off("click");o.onDestroyed.call(this)});n=true}}})}})(jQuery);