/*!
 *
 * jQuery simpleDD
 *
 * A simple jQuery drop down plugin
 *
 * @author			Tim Bennett
 * @version			1.8.0
 * @license			www.texelate.co.uk/mit-license/
 *
 * Download the latest version at www.texelate.co.uk/lab/project/simple-dd/
 *
 * Copyright (c) 2014 - 2015 Texelate Ltd, www.texelate.co.uk
 *
 */
(function(a){a.fn.simpleDD=function(n){var d={timeout:500,dropdownElement:".simpledd-child",closeElement:".simpledd-close",hoverClass:"simpledd-over",closeMenusOnOutsideClick:true,closeMenusOnLoad:false,noScriptLink:null,event:"mouseenter",onInit:function(){},onOpened:function(){},onClosed:function(){}};var n=a.extend(d,n);var b=this;var l="simpledd-no-script-href";var i="simpledd-timeout";var f=this.length;var g=1;var e=(("ontouchstart" in window)||(navigator.msMaxTouchPoints>0));var j=(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?true:false);var h=a("body");function m(p){var o=a(p);if(o.find(n.dropdownElement).eq(0).is(":visible")===true){o.removeClass(n.hoverClass).find(n.dropdownElement).eq(0).css("display","none");if(o.data(i)!=="null"){clearTimeout(o.data(i));o.data(i,"null")}n.onClosed.call(p)}}function k(){b.each(function(){m(this)})}if(j===true){var c=a("a").css("-webkit-tap-highlight-color");h.css("cursor","pointer").css("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)");a("a").css("-webkit-tap-highlight-color",c)}if(e===true){n.event="click"}if(n.closeMenusOnOutsideClick===true){h.on("click",function(o){k()});b.each(function(){a(this).on("click",function(o){o.stopPropagation();a(this).find(n.dropdownElement).eq(0).each(function(){a(this).on("click",function(p){p.stopPropagation()})})})})}return this.each(function(){var p=this;var o=a(this);if(n.noScriptLink!==null){o.find(n.noScriptLink).each(function(){var q=a(this);q.data(l,q.attr("href")).attr("href","#").on("click",function(r){r.preventDefault()})})}o.find(n.closeElement).each(function(){a(this).on("click",function(q){m(p);q.preventDefault()})});if(n.closeMenusOnLoad===true){k()}o.on(n.event,function(q){if(n.event=="click"&&n.noScriptLink!==null&&o.find(n.dropdownElement).eq(0).is(":visible")===true){m(p)}else{k();if(o.data(i)!=="null"){clearTimeout(o.data(i));o.data(i,"null")}o.addClass(n.hoverClass).find(n.dropdownElement).eq(0).css("display","block");n.onOpened.call(this)}});if(e===false&&n.event!="click"){o.on("mouseleave",function(){if(o.find(n.dropdownElement).eq(0).is(":visible")===true){o.data(i,setTimeout(function(){m(p)},n.timeout))}})}g++;if(g===f){n.onInit.call(this);h.trigger("click")}})}})(jQuery);